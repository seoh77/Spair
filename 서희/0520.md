### 2024. 05. 20. 월요일

# Daily 회고


### 📍 작업 내용
- 스프츠센터 게시판 만들어서 지도 게시판과 스포츠센터 게시판 연결
- 게시글 등록 페이지 수정
  - 로그인한 사용자의 닉네임이 작성자에 자동으로 등록되도록 설정
  - 모집상태, 모집성별, 모집인원, 운동종류 초기값 설정
  - 스포츠센터 주소 입력 버튼 만들고, 도로명주소 API와 카카오 API를 활용해 스포츠센터의 도로명주소와 위도, 경도 값 입력
- 게시글 상세페이지에서 작성자가 아닌 경우 수정, 삭제 버튼이 보이지 않도록 수정
- 댓글 페이지 수정
  - 현재 댓글 페이지에는 userId 값이 보이는데, 이를 닉네임이 보이도록 수정
  - 댓글 등록시 로그인한 userId가 자동으로 등록되도록 설정
  - 작성자가 아니면 수정, 삭제 버튼이 보이지 않도록 수정


### 📍 회고

**게시글 등록시 위도, 경도 값이 DB로 넘어오지 않는 문제**
> 도로명주소 API를 사용하여 스포츠센터의 주소를 입력받고, 카카오 API를 활용하여 입력받은 주소의 위도, 경도 값을 계산하여 해당 정보를 DB에 저장하도록 기능을 구현하였다. 이때 DB에서 저장된 정보를 확인해보니 위도, 경도 값이 제대로 넘어오지 않는 문제가 발생했다. `console.log()`로 값을 찍어보며 확인해보니 비동기의 문제라는 생각이 들었고, `async`, `await` 를 사용하여 동기적으로 처리하도록 코드를 수정하여 문제를 해결하였다.

<br />

**게시글 등록시 공백과 타입 에러가 발생하는 상황 고려**
> 회원가입 기능을 구현할 때도 느꼈지만 DB에 정보를 저장하는 로직을 작성할 때는 고려해야 할 예외 사항들이 많은 것 같다. 게시글 등록 페이지에서는 우선 필수로 입력해야하는 칸이 입력되지 않고 등록 버튼이 눌렸을 때를 대비하여 필수값이 공백일 경우 `alert("입력되지 않은 칸이 있습니다.")` 이 나타나도록 하였고, 가격에 숫자 값만 넘어와야 DB에 문제없이 저장이 되는데 문자가 포함되어 들어오는 상황을 고려하여 `if(!Number(board.value.post.price))`일 경우 `alert("가격은 숫자만 입력해주세요.")` 가 나타나도록 코드를 추가하였다. 또한 도로명주소 API를 사용해 입력된 주소를 바탕으로 내부에서 카카오 API를 호출하여 위도, 경도 값을 계산하게 되는데 이 과정에서 에러가 발생하면 `alert("정확한 주소를 입력하였는지 확인해주세요.")`가 표시되도록 구현하였다. 이외에도 추가적인 예외 상황들이 있을 것 같은데 계속 테스트를 진행해보면서 예외 상황이 확인하면 바로 대응 코드를 추가할 예정이다. 

<br />